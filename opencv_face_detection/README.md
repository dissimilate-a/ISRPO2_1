# OpenCV Face Detection Project

Этот проект демонстрирует использование OpenCV для детекции лиц на изображениях с помощью каскадного классификатора Haar.

## Возможности

- Детекция лиц на изображениях с помощью каскадного классификатора Haar
- Визуализация результатов с прямоугольниками вокруг найденных лиц
- Сохранение результата в файл
- Отображение изображений (если доступен GUI)
- Автоматическое создание тестового изображения

## Требования

- OpenCV 4.x
- CMake 3.12 или выше
- Компилятор C++17 или выше
- Python 3 (для создания тестового изображения)

## Сборка проекта

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

## Использование

### Базовое использование

```bash
./bin/face_detection <путь_к_изображению>
```

### С указанием каскадного файла

```bash
./bin/face_detection <путь_к_изображению> <путь_к_cascade_файлу>
```

### Примеры

```bash
# Использование тестового изображения
./bin/face_detection test_image.jpg

# Использование собственного изображения
./bin/face_detection my_photo.jpg

# Использование собственного каскадного файла
./bin/face_detection my_photo.jpg /path/to/haarcascade_frontalface_alt2.xml
```

## Структура проекта

```
opencv_face_detection/
├── face_detection.cpp    # Основной файл приложения
├── CMakeLists.txt        # CMake конфигурация
└── README.md            # Этот файл
```

## Класс FaceDetector

Основной класс для детекции лиц:

### Конструктор
```cpp
FaceDetector(const string& cascade_file)
```

### Методы
- `vector<Rect> detectFaces(const Mat& image)` - Детекция лиц на изображении
- `void drawFaces(Mat& image, const vector<Rect>& faces)` - Отрисовка прямоугольников вокруг лиц
- `void printDetectionInfo(const vector<Rect>& faces)` - Вывод информации о найденных лицах

## Параметры детекции

- **Scale factor**: 1.1 (увеличение размера окна сканирования)
- **Minimum neighbors**: 3 (минимальное количество соседних прямоугольников)
- **Minimum size**: 30x30 пикселей
- **Maximum size**: не ограничено

## Поддерживаемые форматы изображений

- JPEG (.jpg, .jpeg)
- PNG (.png)
- BMP (.bmp)
- TIFF (.tiff)
- И другие форматы, поддерживаемые OpenCV

## Результат работы

Программа создает файл `result_<имя_исходного_файла>` с отмеченными лицами.

## Устранение неполадок

### Ошибка "Error loading cascade classifier"
- Убедитесь, что файл каскадного классификатора существует
- Проверьте правильность пути к файлу
- Убедитесь, что файл не поврежден

### Ошибка "Could not load image"
- Проверьте существование файла изображения
- Убедитесь, что формат файла поддерживается OpenCV
- Проверьте права доступа к файлу

### GUI не отображается
- Убедитесь, что OpenCV собран с поддержкой GUI
- Проверьте наличие X11 (для Linux) или других GUI библиотек
- Результат все равно будет сохранен в файл

## Лицензия

Этот проект создан в учебных целях.