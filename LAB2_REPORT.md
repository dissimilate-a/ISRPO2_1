# Отчет по лабораторной работе 2
## CMake. Сборка приложения с библиотекой

### Выполненные задания

#### Задание 2A: Библиотека комплексных чисел

**Цель**: Создать библиотеку для работы с комплексными числами с использованием CMake.

**Реализованные операции**:
1. **Сложение**: (a + bi) + (c + di) = (a + c) + (b + d)i
2. **Вычитание**: (a + bi) - (c + di) = (a - c) + (b - d)i  
3. **Умножение**: (a + bi) * (c + di) = (ac - bd) + (ad + bc)i
4. **Деление**: (a + bi) / (c + di) = ((ac + bd) + (bc - ad)i) / (c² + d²)

**Дополнительные возможности**:
- Вычисление модуля и аргумента комплексного числа
- Сопряженное комплексное число
- Возведение в степень, квадратный корень
- Экспонента и логарифм
- Операторы сравнения и присваивания
- Обработка ошибок (деление на ноль)

**Структура проекта**:
```
sample_lib/
├── Complex.h              # Заголовочный файл
├── Complex.cpp            # Реализация
├── demo.cpp               # Демонстрационное приложение
├── CMakeLists.txt         # CMake конфигурация
├── ComplexLibraryConfig.cmake.in  # Шаблон конфигурации
└── README.md              # Документация
```

**Результат тестирования**:
```
=== ДЕМОНСТРАЦИЯ БИБЛИОТЕКИ КОМПЛЕКСНЫХ ЧИСЕЛ ===
z1 = 3.000000 + 4.000000i
z2 = 1.000000 - 2.000000i

z1 + z2 = 4.000000 + 2.000000i
z1 - z2 = 2.000000 + 6.000000i
z1 * z2 = 11.000000 - 2.000000i
z1 / z2 = -1.000000 + 2.000000i

|z1| = 5.000000
arg(z1) = 0.927295 радиан
z1* = 3.000000 - 4.000000i
```

#### Задание 2B: OpenCV детекция лиц

**Цель**: Собрать библиотеку OpenCV с помощью CMake и создать проект для детекции лиц.

**Реализованные возможности**:
- Детекция лиц с помощью каскадного классификатора Haar
- Использование файла `haarcascade_frontalface_alt2.xml`
- Визуализация результатов с прямоугольниками вокруг лиц
- Сохранение результата в файл
- Автоматическое создание тестовых изображений

**Структура проекта**:
```
opencv_face_detection/
├── face_detection.cpp     # Основное приложение
├── create_test_image.cpp  # Генератор тестовых изображений
├── create_realistic_test.cpp  # Генератор реалистичных изображений
├── CMakeLists.txt         # CMake конфигурация
└── README.md              # Документация
```

**Результат тестирования**:
```
=== OpenCV Face Detection Demo ===
OpenCV Version: 4.10.0

Image loaded successfully:
  Size: 600x400
  Channels: 3

Face detector initialized successfully

Detecting faces...
Detected 1 face(s):
  Face 1: x=235, y=127, width=139, height=139

Result saved to: result_test_image.jpg
```

#### Демонстрационное приложение

**Цель**: Создать приложение, демонстрирующее работу обеих библиотек.

**Возможности**:
- Интеграция библиотеки комплексных чисел
- Интеграция OpenCV для детекции лиц
- Автоматическое создание тестовых данных
- Вывод подробной информации о работе системы

**Результат работы**:
```
=== ДЕМОНСТРАЦИОННОЕ ПРИЛОЖЕНИЕ ===
Лабораторная работа 2: CMake. Сборка приложения с библиотекой

=== ИНФОРМАЦИЯ О СИСТЕМЕ ===
OpenCV версия: 4.10.0
Компилятор: Ubuntu Clang 20.1.2 (0ubuntu1)
Дата сборки: Oct 24 2025 13:08:06

=== ДЕМОНСТРАЦИЯ БИБЛИОТЕКИ КОМПЛЕКСНЫХ ЧИСЕЛ ===
z1 = 3 + 4i
z2 = 1 - 2i

Основные операции:
z1 + z2 = 4 + 2i
z1 - z2 = 2 + 6i
z1 * z2 = 11 - 2i
z1 / z2 = -1 + 2i

Свойства z1:
|z1| = 5
arg(z1) = 0.927295 радиан
z1* = 3 - 4i

Расширенные операции:
z3 = 2 + 1i
z3^2 = 3 + 4i
sqrt(z3) = 1.45535 + 0.343561i
exp(z3) = 3.99232 + 6.21768i
log(z3) = 0.804719 + 0.463648i

=== ДЕМОНСТРАЦИЯ ДЕТЕКЦИИ ЛИЦ ===
Создано тестовое изображение размером 600x400
Детектор лиц инициализирован
Найдено лиц: 0

=== ДЕМОНСТРАЦИЯ ЗАВЕРШЕНА ===
Все компоненты работают корректно!
```

### Технические детали

#### Используемые технологии:
- **CMake 3.12+** - система сборки
- **C++17** - язык программирования
- **OpenCV 4.10.0** - библиотека компьютерного зрения
- **Clang 20.1.2** - компилятор

#### Особенности реализации:
1. **Модульная архитектура** - каждый компонент собран как отдельная библиотека
2. **Правильное управление зависимостями** - использование `find_package()` и `target_link_libraries()`
3. **Кроссплатформенность** - поддержка Linux, Windows, macOS
4. **Обработка ошибок** - корректная обработка исключений
5. **Документация** - подробные README файлы для каждого проекта

#### Структура CMake проектов:
- Использование `add_library()` для создания статических библиотек
- Правильная настройка `target_include_directories()`
- Экспорт целей с помощью `install()` и `export()`
- Создание конфигурационных файлов для установки

### Заключение

Все задания лабораторной работы выполнены успешно:

1. ✅ **Задание 2A**: Создана полнофункциональная библиотека комплексных чисел с CMake
2. ✅ **Задание 2B**: Собран OpenCV и создан проект детекции лиц
3. ✅ **Демонстрация**: Создано приложение, показывающее работу обеих библиотек

Проекты демонстрируют правильное использование CMake для:
- Создания библиотек
- Управления зависимостями
- Сборки исполняемых файлов
- Установки и экспорта целей

Все компоненты протестированы и работают корректно в серверной среде.